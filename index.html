<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Time Series Segmentation for Longitudinal Data Analysis • episodes</title>
<script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Time Series Segmentation for Longitudinal Data Analysis">
<meta name="description" content="Segment longitudinal data into meaningful episodes based on temporal gaps and variable changes. Designed for analyzing treatment patterns, patient journeys, and other time series data where interruptions and changes in covariates are significant. Functions support identifying discontinuities, tracking variable changes within episodes, and analyzing retention across specified time thresholds. Particularly useful for survival analyses and other time-varying statistical methods requiring structured temporal data.">
<meta property="og:description" content="Segment longitudinal data into meaningful episodes based on temporal gaps and variable changes. Designed for analyzing treatment patterns, patient journeys, and other time series data where interruptions and changes in covariates are significant. Functions support identifying discontinuities, tracking variable changes within episodes, and analyzing retention across specified time thresholds. Particularly useful for survival analyses and other time-varying statistical methods requiring structured temporal data.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">episodes</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dylanpieper/episodes" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="episodes-">episodes <img src="reference/figures/episodes-hex.svg" align="right" width="140"><a class="anchor" aria-label="anchor" href="#episodes-"></a>
</h1></div>
<p><a href="https://github.com/dylanpieper/episodes/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/dylanpieper/episodes/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></p>
<p>Segment longitudinal data into meaningful episodes based on temporal gaps and variable changes. It’s designed for analyzing treatment patterns, patient journeys, and other time series data where interruptions and changes in covariates are significant. This tool is useful for survival analyses and other time-varying statistical methods requiring structured temporal data.</p>
<p>Features:</p>
<ul>
<li>Identify episodes based on gaps between dates</li>
<li>Track how variables change within episodes</li>
<li>Analyze continuation (i.e., retention) across episodes</li>
<li>Support for grouped data workflows in the tidyverse style</li>
</ul>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>From CRAN:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"episodes"</span><span class="op">)</span></span></code></pre></div>
<p>Development version:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pak.html" class="external-link">pak</a></span><span class="op">(</span><span class="st">"dylanpieper/episodes"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic Usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<div class="section level3">
<h3 id="segmenting-client-treatment-episodes">Segmenting client treatment episodes<a class="anchor" aria-label="anchor" href="#segmenting-client-treatment-episodes"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dylanpieper/episodes" class="external-link">episodes</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">episodes</span> <span class="op">&lt;-</span> <span class="va">substance_use</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">client_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/segment_episodes.html">segment_episodes</a></span><span class="op">(</span></span>
<span>    <span class="va">visit_date</span>,</span>
<span>    gap_threshold <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    gap_unit <span class="op">=</span> <span class="st">"months"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Additional fixed variables are included in the results, while varying variables are excluded. Use <code><a href="reference/segment_episodes_by_covars.html">segment_episodes_by_covars()</a></code> to track changes in specific variables.</p>
</div>
<div class="section level3">
<h3 id="identifying-active-vs-inactive-episodes">Identifying active vs. inactive episodes<a class="anchor" aria-label="anchor" href="#identifying-active-vs-inactive-episodes"></a>
</h3>
<p>By default, <code><a href="reference/segment_episodes.html">segment_episodes()</a></code> assigns the status of episodes as:</p>
<ul>
<li>
<strong>Active</strong>: Recent episodes (based on <code>inactive_threshold</code>)</li>
<li>
<strong>Inactive</strong>: Episodes that ended before the inactive threshold</li>
<li>
<strong>Gap</strong>: Episodes that are followed by another episode</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">status_check</span> <span class="op">&lt;-</span> <span class="va">substance_use</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">client_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/segment_episodes.html">segment_episodes</a></span><span class="op">(</span></span>
<span>    <span class="va">visit_date</span>, </span>
<span>    gap_threshold <span class="op">=</span> <span class="fl">2</span>, </span>
<span>    gap_unit <span class="op">=</span> <span class="st">"months"</span>,</span>
<span>    inactive_threshold <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    inactive_unit <span class="op">=</span> <span class="st">"months"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">status</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="including-covariate-changes">Including covariate changes<a class="anchor" aria-label="anchor" href="#including-covariate-changes"></a>
</h3>
<p>Track when important variables change within episodes using <code><a href="reference/segment_episodes_by_covars.html">segment_episodes_by_covars()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">episodes_by_covars</span> <span class="op">&lt;-</span> <span class="va">substance_use</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">client_id</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/segment_episodes_by_covars.html">segment_episodes_by_covars</a></span><span class="op">(</span></span>
<span>    <span class="va">visit_date</span>,</span>
<span>    covar_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"substance_use_past_week"</span>, </span>
<span>                   <span class="st">"quality_of_life_score"</span>, </span>
<span>                   <span class="st">"medication_dose_mg"</span><span class="op">)</span>,</span>
<span>    gap_threshold <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    gap_unit <span class="op">=</span> <span class="st">"months"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">client_id</span>, <span class="va">episode_id</span>, <span class="va">segment_id</span><span class="op">)</span></span></code></pre></div>
<p>An additional status for <strong>ongoing</strong> episodes is included for the segmentation of episodes by changes in the covariates.</p>
</div>
<div class="section level3">
<h3 id="analyzing-continuation-ie-retention">Analyzing continuation (i.e., retention)<a class="anchor" aria-label="anchor" href="#analyzing-continuation-ie-retention"></a>
</h3>
<p>The <code><a href="reference/split_episode.html">split_episode()</a></code> function helps analyze whether episodes continue past specific time thresholds:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">retention</span> <span class="op">&lt;-</span> <span class="va">episodes</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/split_episode.html">split_episode</a></span><span class="op">(</span></span>
<span>    thresholds <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">30</span>, <span class="fl">12</span>, <span class="fl">6</span><span class="op">)</span>, </span>
<span>    units <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"days"</span>, <span class="st">"weeks"</span>, <span class="st">"months"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>The function adds columns for each threshold: - <code>*_date</code>: The date corresponding to threshold after episode start - <code>*_eligible</code>: Whether enough time has passed to evaluate this threshold - <code>*_continued</code>: Whether the episode continued past this threshold</p>
</div>
</div>
<div class="section level2">
<h2 id="dataset">Dataset<a class="anchor" aria-label="anchor" href="#dataset"></a>
</h2>
<p>The package includes a simulated substance use treatment dataset:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">substance_use</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/dylanpieper/episodes" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/dylanpieper/episodes/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing episodes</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Dylan Pieper <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Dylan Pieper.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
